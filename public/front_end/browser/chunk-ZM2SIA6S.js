import{a as W}from"./chunk-XCFSAI62.js";import{a as z}from"./chunk-GX2A24RJ.js";import{e as O,f as D}from"./chunk-Y2NSYKDS.js";import{d as E,f as k,h as P,i as L,j as B,l as N}from"./chunk-622SOSYF.js";import{l as V,m as I}from"./chunk-7JZTCISL.js";import{Db as o,Eb as r,Fb as x,Jb as C,Ob as f,Qb as h,Vb as F,Wb as A,Xb as T,Yb as s,Za as p,Zb as w,_a as M,ac as v,bc as y,cc as S,f as g,jb as b,ka as m,la as d,pb as _,wb as c}from"./chunk-55BIBHTM.js";var Q=["mapContainer"];function R(i,t){if(i&1){let e=C();o(0,"app-direction",10),f("close",function(a){m(e);let u=h();return d(u.onClose(a))}),r()}if(i&2){let e=h();c("content",e.content)}}function G(i,t){if(i&1){let e=C();o(0,"button",11),f("click",function(){m(e);let a=h();return d(a.openDirection())}),s(1,"\u4F7F\u7528\u8AAA\u660E"),r()}}function q(i,t){if(i&1&&(o(0,"option",12),s(1),r()),i&2){let e=t.$implicit;c("value",e.area),p(),w(e.area)}}function K(i,t){if(i&1&&(o(0,"option",12),s(1),r()),i&2){let e=t.$implicit;c("value",e),p(),w(e)}}var j=class i{constructor(t,e){this.mapSrv=t;this.alert=e}mapContainer;currentLocation;map;areas;timeList=[];selectedArea="";selectedTIme="";direction=!0;content={title:"\u53F0\u5357\u5783\u573E\u6E05\u904B\u5730\u9EDE\u67E5\u8A62",content:`
    \u4F7F\u7528\u65B9\u5F0F\uFF1A
    1. \u9078\u64C7\u8981\u67E5\u8A62\u7684\u6642\u9593\u8207\u884C\u653F\u5340
    2. \u9EDE\u64CA\u67E5\u8A62\u5F8C\u5C31\u6703\u6A19\u793A\u51FA\u8A72\u6642\u9593\u9EDE\u7684\u5783\u573E\u6E05\u904B\u4F4D\u7F6E
    3. \u9078\u64C7\u6E05\u9664\u5247\u53EF\u6E05\u9664\u641C\u5C0B\u7D50\u679C
  `};ngOnInit(){this.setAreaList(),this.setTimeList()}ngAfterViewInit(){return g(this,null,function*(){try{yield this.mapSrv.loadGoogleMapsApi(O.googleMapsApiKey),yield this.mapSrv.getUserLocation(),this.mapSrv.initMap(this.mapContainer)}catch(t){console.error("Google Maps \u52A0\u8F09\u5931\u6557",t)}})}setAreaList(){return g(this,null,function*(){this.areas=yield this.mapSrv.getAreaList()})}setTimeList(){for(let t=0;t<24;t++){let e=t.toString().padStart(2,"0");this.timeList.push(`${e}:00`,`${e}:30`)}}search(t,e){return g(this,null,function*(){if(t===""){this.alert.showAlert("\u5730\u9EDE\u4E0D\u5F97\u70BA\u7A7A");return}if(e===""&&t!==""){yield this.mapSrv.searchByArea(t);return}yield this.mapSrv.searchByAreaAndTime(t,e)})}findFood(){return g(this,null,function*(){yield this.mapSrv.findFood()})}clearMarkers(){this.mapSrv.clearMarkers()}openDirection(){this.direction=!0}onClose(t){console.log("hidden"),this.direction=t}static \u0275fac=function(e){return new(e||i)(M(W),M(D))};static \u0275cmp=b({type:i,selectors:[["app-food-map"]],viewQuery:function(e,n){if(e&1&&F(Q,5),e&2){let a;A(a=T())&&(n.mapContainer=a.first)}},decls:18,vars:6,consts:[["mapContainer",""],["class","direction",3,"content","close",4,"ngIf"],[1,"container"],["class","open-direction",3,"click",4,"ngIf"],[1,"button-container"],[3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"click"],[1,"map-container"],[1,"direction",3,"close","content"],[1,"open-direction",3,"click"],[3,"value"]],template:function(e,n){if(e&1){let a=C();_(0,R,1,1,"app-direction",1),o(1,"main",2),_(2,G,2,0,"button",3),o(3,"div",4)(4,"select",5),S("ngModelChange",function(l){return m(a),y(n.selectedArea,l)||(n.selectedArea=l),d(l)}),o(5,"option",6),s(6,"\u8ACB\u9078\u64C7\u5730\u5340"),r(),_(7,q,2,2,"option",7),r(),o(8,"select",5),S("ngModelChange",function(l){return m(a),y(n.selectedTIme,l)||(n.selectedTIme=l),d(l)}),o(9,"option",6),s(10,"\u8ACB\u9078\u64C7\u6642\u9593"),r(),_(11,K,2,2,"option",7),r(),o(12,"button",8),f("click",function(){return m(a),d(n.search(n.selectedArea,n.selectedTIme))}),s(13,"\u641C\u5C0B"),r(),o(14,"button",8),f("click",function(){return m(a),d(n.clearMarkers())}),s(15,"\u6E05\u9664\u641C\u5C0B\u7D50\u679C"),r()(),x(16,"div",9,0),r()}e&2&&(c("ngIf",n.direction),p(2),c("ngIf",!n.direction),p(2),v("ngModel",n.selectedArea),p(3),c("ngForOf",n.areas),p(),v("ngModel",n.selectedTIme),p(3),c("ngForOf",n.timeList))},dependencies:[N,L,B,P,E,k,V,z,I],styles:[".direction[_ngcontent-%COMP%]{z-index:999;position:absolute;top:20%;left:50%;transform:translate(-50%,-50%);height:30%;width:70%}.open-direction[_ngcontent-%COMP%]{z-index:999;position:absolute;bottom:2%;right:2%;height:fit-content;width:fit-content;font-size:1rem;padding:5px;background-color:var(--direction-color);border:none}.container[_ngcontent-%COMP%]{width:100%}.map-container[_ngcontent-%COMP%]{height:300px;justify-content:center;align-items:space-around;margin:30px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:space-around;margin:10px}button[_ngcontent-%COMP%]{margin:10px;font-size:1.2rem;border:1px solid #ccc;border-radius:10px}@media (max_width: 786px){button[_ngcontent-%COMP%]{width:100px}}@media (max-width: 576px){.button-container[_ngcontent-%COMP%]{margin:10px;align-items:space-evenly}button[_ngcontent-%COMP%]{width:fit-content;font-size:.8rem}select[_ngcontent-%COMP%]{font-size:.6rem;padding:8px;width:80px}}"]})};export{j as FoodMapComponent};
