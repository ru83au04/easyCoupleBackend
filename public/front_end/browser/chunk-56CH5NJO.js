import{a as N}from"./chunk-YO5QZQX6.js";import{e as x,f as B}from"./chunk-UDEWYARD.js";import{d as E,f as I,h as L,i as V,j as P,k}from"./chunk-J243DPSV.js";import{l as O}from"./chunk-SPQETPFV.js";import{Bb as o,Cb as n,Db as S,Hb as A,Kb as M,Rb as F,Sb as b,Tb as T,Ub as l,Vb as _,Ya as p,Yb as h,Za as f,Zb as v,_b as y,f as m,ib as w,ka as c,la as d,nb as C,ub as u}from"./chunk-Y36Y4OMK.js";var j=["mapContainer"];function D(r,t){if(r&1&&(o(0,"option",8),l(1),n()),r&2){let e=t.$implicit;u("value",e.area),p(),_(e.area)}}function Q(r,t){if(r&1&&(o(0,"option",8),l(1),n()),r&2){let e=t.$implicit;u("value",e),p(),_(e)}}var W=class r{constructor(t,e){this.mapSrv=t;this.alert=e}currentLocation;mapContainer;map;areas;timeList=[];selectedArea="";selectedTIme="";ngOnInit(){this.setAreaList(),this.setTimeList()}ngAfterViewInit(){return m(this,null,function*(){try{yield this.mapSrv.loadGoogleMapsApi(x.googleMapsApiKey),yield this.mapSrv.getUserLocation(),this.mapSrv.initMap(this.mapContainer)}catch(t){console.error("Google Maps \u52A0\u8F09\u5931\u6557",t)}})}setAreaList(){return m(this,null,function*(){this.areas=yield this.mapSrv.getAreaList()})}setTimeList(){for(let t=0;t<24;t++){let e=t.toString().padStart(2,"0");this.timeList.push(`${e}:00`,`${e}:30`)}}search(t,e){return m(this,null,function*(){if(t===""){this.alert.showAlert("\u5730\u9EDE\u4E0D\u5F97\u70BA\u7A7A");return}if(e===""&&t!==""){yield this.mapSrv.searchByArea(t);return}yield this.mapSrv.searchByAreaAndTime(t,e)})}findFood(){return m(this,null,function*(){yield this.mapSrv.findFood()})}clearMarkers(){this.mapSrv.clearMarkers()}static \u0275fac=function(e){return new(e||r)(f(N),f(B))};static \u0275cmp=w({type:r,selectors:[["app-food-map"]],viewQuery:function(e,i){if(e&1&&F(j,5),e&2){let a;b(a=T())&&(i.mapContainer=a.first)}},decls:16,vars:4,consts:[["mapContainer",""],[1,"container"],[1,"button-container"],[3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"click"],[1,"map-container"],[3,"value"]],template:function(e,i){if(e&1){let a=A();o(0,"main",1)(1,"div",2)(2,"select",3),y("ngModelChange",function(s){return c(a),v(i.selectedArea,s)||(i.selectedArea=s),d(s)}),o(3,"option",4),l(4,"\u8ACB\u9078\u64C7\u5730\u5340"),n(),C(5,D,2,2,"option",5),n(),o(6,"select",3),y("ngModelChange",function(s){return c(a),v(i.selectedTIme,s)||(i.selectedTIme=s),d(s)}),o(7,"option",4),l(8,"\u8ACB\u9078\u64C7\u6642\u9593"),n(),C(9,Q,2,2,"option",5),n(),o(10,"button",6),M("click",function(){return c(a),d(i.search(i.selectedArea,i.selectedTIme))}),l(11,"\u641C\u5C0B"),n(),o(12,"button",6),M("click",function(){return c(a),d(i.clearMarkers())}),l(13,"\u6E05\u9664\u641C\u5C0B\u7D50\u679C"),n()(),S(14,"div",7,0),n()}e&2&&(p(2),h("ngModel",i.selectedArea),p(3),u("ngForOf",i.areas),p(),h("ngModel",i.selectedTIme),p(3),u("ngForOf",i.timeList))},dependencies:[k,V,P,L,E,I,O],styles:[".container[_ngcontent-%COMP%]{width:100%}.map-container[_ngcontent-%COMP%]{height:300px;justify-content:center;align-items:space-around;margin:30px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:space-around;margin:10px}button[_ngcontent-%COMP%]{margin:10px;font-size:1.2rem;border:1px solid #ccc;border-radius:10px}@media (max_width: 786px){button[_ngcontent-%COMP%]{width:100px}}@media (max-width: 576px){.button-container[_ngcontent-%COMP%]{margin:10px;align-items:space-evenly}button[_ngcontent-%COMP%]{width:fit-content;font-size:.8rem}select[_ngcontent-%COMP%]{font-size:.6rem;padding:8px;width:80px}}"]})};export{W as FoodMapComponent};
