import{a as o,b as u,c as l,e as m}from"./chunk-AUOKAUQD.js";import{Y as n,ba as p,i as a,m as c}from"./chunk-SFNPEGCY.js";var i=class r{token;user={id:0,username:"",real_name:"",phone:"",emergency:"",emergency_phone:"",address:"",start_date:new Date,special_date:0,special_date_delay:0,role_id:0,department_id:0};currentUserSubject=new c(this.user);currentUser$=this.currentUserSubject.asObservable();constructor(){}loginUser(t){this.currentUserSubject.next(t),this.token=sessionStorage.getItem("easy_couple_token")}logoutUser(){this.currentUserSubject.next(this.user)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})},b=(e=>(e[e.MANAGER=1]="MANAGER",e[e.EMPLOYEE=2]="EMPLOYEE",e))(b||{}),_=(e=>(e[e.BACKEND=1]="BACKEND",e[e.FRONTEND=2]="FRONTEND",e))(_||{});var d=class r{constructor(t,e){this.http=t;this.authSrv=e}rootUrl=m.rootURL;checkUser(t,e){let s=new u().set("username",t).set("password",e);return this.http.get(`${this.rootUrl}/api/user/check`,{params:s})}registUser(t){let e={username:t.username,password:t.password,name:t.real_name,emergency:t.emergency,address:t.address,start_date:t.start_date.toString(),role_id:t.role_id,department_id:t.department_id,phone:t.phone,emergency_phone:t.emergency_phone};return this.http.post(`${this.rootUrl}/api/user/register`,e)}loginUser(t,e){let s={username:t,password:e};return this.http.post(`${this.rootUrl}/api/user/login`,s)}logoutUser(){sessionStorage.removeItem("easy_couple_token")}getUserInfo(){let t=sessionStorage.getItem("easy_couple_token");if(!t)return new a;let e=new o().set("Authorization",`Bearer ${t}`);return this.http.get(`${this.rootUrl}/api/user/info`,{headers:e})}editUserInfo(t){let e=sessionStorage.getItem("easy_couple_token");if(!e)return new a;let s=new o().set("Authorization",`Bearer ${e}`);return this.http.post(`${this.rootUrl}/api/user/edit`,t,{headers:s})}deleteUser(t,e){let s=new o().set("Authorization",`Bearer ${t}`),h=new u().set("id",e);return this.http.get(`${this.rootUrl}/api/user/delete`,{headers:s,params:h})}static \u0275fac=function(e){return new(e||r)(p(l),p(i))};static \u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})};export{i as a,b,_ as c,d};
