import{a as W}from"./chunk-MYZ65S2Z.js";import{$ as c,$a as h,Ca as v,Eb as L,Ga as _,Gb as I,Hb as k,Jb as b,Kb as B,Lb as O,Mb as N,Na as u,Oa as o,Pa as n,Qa as w,Ra as F,Sa as f,Ua as A,Va as T,Wa as E,Xa as s,Ya as C,_ as m,_a as M,ab as y,e as d,ta as l,ua as S,ub as V}from"./chunk-JQBQYFJU.js";var P=["mapContainer"];function Q(r,t){if(r&1&&(o(0,"option",6),s(1),n()),r&2){let e=t.$implicit;u("value",e.area),l(),C(e.area)}}function R(r,t){if(r&1&&(o(0,"option",6),s(1),n()),r&2){let e=t.$implicit;u("value",e),l(),C(e)}}var D=class r{constructor(t){this.mapSrv=t}currentLocation;mapContainer;map;areas;timeList=[];selectedArea="";selectedTIme="";ngOnInit(){this.setAreaList(),this.setTimeList()}ngAfterViewInit(){return d(this,null,function*(){try{yield this.mapSrv.loadGoogleMapsApi(L.googleMapsApiKey),yield this.mapSrv.getUserLocation(),this.mapSrv.initMap(this.mapContainer)}catch(t){console.error("Google Maps \u52A0\u8F09\u5931\u6557",t)}})}setAreaList(){return d(this,null,function*(){this.areas=yield this.mapSrv.getAreaList()})}setTimeList(){for(let t=0;t<24;t++){let e=t.toString().padStart(2,"0");this.timeList.push(`${e}:00`,`${e}:30`)}}search(t,e){return d(this,null,function*(){if(t===""){console.log("\u5730\u9EDE\u4E0D\u5F97\u70BA\u7A7A");return}if(e===""&&t!==""){yield this.mapSrv.searchByArea(t);return}yield this.mapSrv.searchByAreaAndTime(t,e)})}findFood(){return d(this,null,function*(){yield this.mapSrv.findFood()})}clearMarkers(){this.mapSrv.clearMarkers()}static \u0275fac=function(e){return new(e||r)(S(W))};static \u0275cmp=v({type:r,selectors:[["app-food-map"]],viewQuery:function(e,i){if(e&1&&A(P,5),e&2){let a;T(a=E())&&(i.mapContainer=a.first)}},decls:17,vars:4,consts:[["mapContainer",""],[3,"click"],[3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"map_container"],[3,"value"]],template:function(e,i){if(e&1){let a=F();o(0,"main")(1,"button",1),f("click",function(){return m(a),c(i.findFood())}),s(2,"\u627E\u98DF\u7269"),n(),o(3,"button",1),f("click",function(){return m(a),c(i.clearMarkers())}),s(4,"\u6E05\u9664\u641C\u5C0B\u7D50\u679C"),n(),o(5,"select",2),y("ngModelChange",function(p){return m(a),h(i.selectedArea,p)||(i.selectedArea=p),c(p)}),o(6,"option",3),s(7,"\u8ACB\u9078\u64C7\u5730\u5340"),n(),_(8,Q,2,2,"option",4),n(),o(9,"select",2),y("ngModelChange",function(p){return m(a),h(i.selectedTIme,p)||(i.selectedTIme=p),c(p)}),o(10,"option",3),s(11,"\u8ACB\u9078\u64C7\u6642\u9593"),n(),_(12,R,2,2,"option",4),n(),o(13,"button",1),f("click",function(){return m(a),c(i.search(i.selectedArea,i.selectedTIme))}),s(14,"\u641C\u5C0B"),n(),w(15,"div",5,0),n()}e&2&&(l(5),M("ngModel",i.selectedArea),l(3),u("ngForOf",i.areas),l(),M("ngModel",i.selectedTIme),l(3),u("ngForOf",i.timeList))},dependencies:[N,B,O,b,I,k,V],styles:[".map_container[_ngcontent-%COMP%]{height:100%;margin:10px}.map_container[_ngcontent-%COMP%]{height:500px}"]})};export{D as FoodMapComponent};
