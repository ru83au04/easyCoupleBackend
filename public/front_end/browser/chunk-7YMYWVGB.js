import{a as W}from"./chunk-GVUZERYR.js";import{$ as d,$a as M,Ca as S,Fb as V,Ga as f,Hb as I,Ib as b,Jb as k,Kb as B,Lb as O,Mb as N,Na as u,Oa as o,Pa as n,Qa as w,Ra as F,Sa as C,Va as A,Wa as T,Xa as E,Ya as l,Za as _,_ as c,ab as y,bb as h,e as m,ta as p,ua as v,vb as L}from"./chunk-YATWYMKV.js";var D=["mapContainer"];function Q(a,t){if(a&1&&(o(0,"option",7),l(1),n()),a&2){let e=t.$implicit;u("value",e.area),p(),_(e.area)}}function R(a,t){if(a&1&&(o(0,"option",7),l(1),n()),a&2){let e=t.$implicit;u("value",e),p(),_(e)}}var P=class a{constructor(t){this.mapSrv=t}currentLocation;mapContainer;map;areas;timeList=[];selectedArea="";selectedTIme="";ngOnInit(){this.setAreaList(),this.setTimeList()}ngAfterViewInit(){return m(this,null,function*(){try{yield this.mapSrv.loadGoogleMapsApi(V.googleMapsApiKey),yield this.mapSrv.getUserLocation(),this.mapSrv.initMap(this.mapContainer)}catch(t){console.error("Google Maps \u52A0\u8F09\u5931\u6557",t)}})}setAreaList(){return m(this,null,function*(){this.areas=yield this.mapSrv.getAreaList()})}setTimeList(){for(let t=0;t<24;t++){let e=t.toString().padStart(2,"0");this.timeList.push(`${e}:00`,`${e}:30`)}}search(t,e){return m(this,null,function*(){if(t===""){console.log("\u5730\u9EDE\u4E0D\u5F97\u70BA\u7A7A");return}if(e===""&&t!==""){yield this.mapSrv.searchByArea(t);return}yield this.mapSrv.searchByAreaAndTime(t,e)})}findFood(){return m(this,null,function*(){yield this.mapSrv.findFood()})}clearMarkers(){this.mapSrv.clearMarkers()}static \u0275fac=function(e){return new(e||a)(v(W))};static \u0275cmp=S({type:a,selectors:[["app-food-map"]],viewQuery:function(e,i){if(e&1&&A(D,5),e&2){let r;T(r=E())&&(i.mapContainer=r.first)}},decls:16,vars:4,consts:[["mapContainer",""],[1,"button_container"],[3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"click"],[1,"map_container"],[3,"value"]],template:function(e,i){if(e&1){let r=F();o(0,"main")(1,"div",1)(2,"select",2),h("ngModelChange",function(s){return c(r),y(i.selectedArea,s)||(i.selectedArea=s),d(s)}),o(3,"option",3),l(4,"\u8ACB\u9078\u64C7\u5730\u5340"),n(),f(5,Q,2,2,"option",4),n(),o(6,"select",2),h("ngModelChange",function(s){return c(r),y(i.selectedTIme,s)||(i.selectedTIme=s),d(s)}),o(7,"option",3),l(8,"\u8ACB\u9078\u64C7\u6642\u9593"),n(),f(9,R,2,2,"option",4),n(),o(10,"button",5),C("click",function(){return c(r),d(i.search(i.selectedArea,i.selectedTIme))}),l(11,"\u641C\u5C0B"),n(),o(12,"button",5),C("click",function(){return c(r),d(i.clearMarkers())}),l(13,"\u6E05\u9664\u641C\u5C0B\u7D50\u679C"),n()(),w(14,"div",6,0),n()}e&2&&(p(2),M("ngModel",i.selectedArea),p(3),u("ngForOf",i.areas),p(),M("ngModel",i.selectedTIme),p(3),u("ngForOf",i.timeList))},dependencies:[N,B,O,k,I,b,L],styles:[".map_container[_ngcontent-%COMP%]{height:500px;margin:0}.button_container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:10px}"]})};export{P as FoodMapComponent};
