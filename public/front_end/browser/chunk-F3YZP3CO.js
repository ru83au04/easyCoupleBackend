import{a as R,n as b,v as E}from"./chunk-O4P3KLD7.js";import{d as D}from"./chunk-UQWA5GET.js";import{D as x,E as g,Z as p,_ as m,aa as v,cb as w,da as s,i as y,k,kb as C,l as d,p as _,wa as S}from"./chunk-3POSLOPW.js";var V=class{};function P(t){return t&&typeof t.connect=="function"&&!(t instanceof k)}var h=function(t){return t[t.REPLACED=0]="REPLACED",t[t.INSERTED=1]="INSERTED",t[t.MOVED=2]="MOVED",t[t.REMOVED=3]="REMOVED",t}(h||{}),W=new v("_ViewRepeater"),z=class{applyChanges(T,e,i,r,n){T.forEachOperation((o,l,u)=>{let a,c;if(o.previousIndex==null){let f=i(o,l,u);a=e.createEmbeddedView(f.templateRef,f.context,f.index),c=h.INSERTED}else u==null?(e.remove(l),c=h.REMOVED):(a=e.get(l),e.move(a,u),c=h.MOVED);n&&n({context:a?.context,operation:c,record:o})})}detach(){}};var F=20,$e=(()=>{class t{_ngZone=s(S);_platform=s(R);_renderer=s(w).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new d;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=F){return this._platform.isBrowser?new y(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=e>0?this._scrolled.pipe(g(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):_()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){let r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(x(n=>!n||r.indexOf(n)>-1))}getAncestorScrollContainers(e){let i=[];return this.scrollContainers.forEach((r,n)=>{this._scrollableContainsElement(n,e)&&i.push(n)}),i}_scrollableContainsElement(e,i){let r=b(i),n=e.getElementRef().nativeElement;do if(r==n)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(i){return new(i||t)};static \u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var B=20,Ye=(()=>{class t{_platform=s(R);_listeners;_viewportSize;_change=new d;_document=s(D,{optional:!0});constructor(){let e=s(S),i=s(w).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=n=>this._change.next(n);this._listeners=[i.listen("window","resize",r),i.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),r=e.documentElement,n=r.getBoundingClientRect(),o=-n.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,l=-n.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:o,left:l}}change(e=B){return e>0?this._change.pipe(g(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var O=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=C({type:t});static \u0275inj=m({})}return t})(),qe=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=C({type:t});static \u0275inj=m({imports:[E,O,E,O]})}return t})();export{V as a,P as b,h as c,W as d,z as e,$e as f,Ye as g,O as h,qe as i};
